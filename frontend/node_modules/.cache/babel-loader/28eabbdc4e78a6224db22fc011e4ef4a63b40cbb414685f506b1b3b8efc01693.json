{"ast":null,"code":"import React,{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.min.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ViewExpenses(){const[expenses,setExpenses]=useState([]);{/*Created an array of months to be able to see the months in actual words in the JSX\n   rather than just numbers*/}const months=[{value:1,label:'January'},{value:2,label:'February'},{value:3,label:'March'},{value:4,label:'April'},{value:5,label:'May'},{value:6,label:'June'},{value:7,label:'July'},{value:8,label:'August'},{value:9,label:'September'},{value:10,label:'October'},{value:11,label:'November'},{value:12,label:'December'}];useEffect(()=>{const fetchExpenses=async()=>{try{const token=window.localStorage.getItem('token');const response=await axios.get('/api/profile',{headers:{Authorization:token}});if(response.data.userId){//If true give me the expenses he's admin to \nconst expensesResponse=await axios.get(\"/api/expenses/\".concat(response.data.userId));const fetchedExppenses=expensesResponse.data;setExpenses(fetchedExppenses||[]);}}catch(error){console.log(error);}};fetchExpenses();},[]);const handleDelete=async expenseId=>{const confirmDelete=window.confirm(\"Are you want to delete this expense? \");if(!confirmDelete){return;}try{const token=window.localStorage.getItem('token');const response=await axios.delete(\"http://localhost:5000/api/expenses/\".concat(expenseId),{headers:{Authorization:token}});if(response.status==200){//Remove deleted expense from state\nconst updatedExpenses=expenses.filter(expense=>expense._id!==expenseId);setExpenses(updatedExpenses);}else{console.error('Failed to delete expense');}}catch(error){console.error('Error deleting expense:',error);}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\" View Building Expenses \"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Expense Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date Created\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Month\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:expenses.length>0?expenses.map(expense=>{var _months$find;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:expense.type_expenses}),/*#__PURE__*/_jsx(\"td\",{children:expense.total}),/*#__PURE__*/_jsx(\"td\",{children:new Date(expense.date_created).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:(_months$find=months.find(month=>month.value===expense.month))===null||_months$find===void 0?void 0:_months$find.label}),/*#__PURE__*/_jsx(\"td\",{children:expense.year}),/*#__PURE__*/_jsx(\"td\",{button:true,onClick:()=>handleDelete(expense._id),className:\"btn btn-danger\",children:\"Delete\"})]},expense._id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"no-expenses\",children:\" No expenses tied to this building...\"})})})]})]})});}export default ViewExpenses;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ViewExpenses","expenses","setExpenses","months","value","label","fetchExpenses","token","window","localStorage","getItem","response","get","headers","Authorization","data","userId","expensesResponse","concat","fetchedExppenses","error","console","log","handleDelete","expenseId","confirmDelete","confirm","delete","status","updatedExpenses","filter","expense","_id","children","className","length","map","_months$find","type_expenses","total","Date","date_created","toLocaleDateString","find","month","year","button","onClick","colSpan"],"sources":["/home/tonyg/Node-React.js-Expenses-Application/frontend/src/components/ViewExpenses.js"],"sourcesContent":["import React, { useState , useEffect } from 'react'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport axios from 'axios';\nfunction ViewExpenses() {\n    const [expenses , setExpenses] = useState([]);\n\n  {/*Created an array of months to be able to see the months in actual words in the JSX\n   rather than just numbers*/}\n    const months = [\n        {value: 1, label: 'January'},\n      {value:2 , label: 'February'},\n      {value:3 , label: 'March'},\n      {value:4 , label: 'April'},\n      {value:5 , label: 'May'},\n      {value:6 , label: 'June'},\n      {value:7 , label: 'July'},\n      {value:8 , label: 'August'},\n      {value:9 , label: 'September'},\n      {value:10, label: 'October'},\n      {value:11, label: 'November'},\n      {value:12, label: 'December'}\n    ];\n  useEffect(() => {\n    const fetchExpenses = async() => {\n      try {\n        const token = window.localStorage.getItem('token');\n        const response = await axios.get('/api/profile', {\n          headers: {Authorization: token},\n        });\n        if(response.data.userId) {\n          //If true give me the expenses he's admin to \n          const expensesResponse = await axios.get(\n            `/api/expenses/${response.data.userId}`\n          );\n          const fetchedExppenses = expensesResponse.data;\n          setExpenses(fetchedExppenses|| []);\n\n        }\n\n      }catch(error) {\n        console.log(error);\n      }\n    };\n    fetchExpenses();\n  }, []);\n\n \n\n  const handleDelete = async (expenseId) => {\n    const confirmDelete = window.confirm(\"Are you want to delete this expense? \");\n    if (!confirmDelete){\n      return;\n    }\n    try {\n      const token = window.localStorage.getItem('token');\n      const response = await axios.delete(`http://localhost:5000/api/expenses/${expenseId}` , {\n          headers : {Authorization : token},\n          \n    });\n\n    if (response.status == 200) {\n        //Remove deleted expense from state\n        const updatedExpenses = expenses.filter(expense => expense._id !== expenseId );\n        setExpenses(updatedExpenses);\n    }else{\n      console.error('Failed to delete expense');\n    }\n  }catch (error){\n    console.error('Error deleting expense:' , error)\n  }\n}\n     \n  return (\n    <div>\n      <div className='container'>\n        <h2 className='text-center'> View Building Expenses </h2>\n        <table className='table'>\n            <thead>\n                <tr>\n                    <th>Expense Type</th>\n                    <th>Total</th>\n                    <th>Date Created</th>\n                    <th>Month</th>\n                    <th>Year</th>\n                    <th>Actions</th>\n                </tr>\n            </thead>\n            <tbody>\n              {expenses.length > 0 ? (\n                expenses.map((expense) =>(\n                  <tr key={expense._id}>\n                    <td>{expense.type_expenses}</td> \n                    <td>{expense.total}</td>\n                    <td>{new Date(expense.date_created).toLocaleDateString()}</td>\n                    {/* Represent the months as words based on the key , value pair */}\n                    <td>{months.find(month => month.value === expense.month)?.label}</td>\n                    <td>{expense.year}</td>\n                    <td button onClick={() => handleDelete(expense._id)} className='btn btn-danger'>Delete</td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                <td colSpan='5' className='no-expenses'> No expenses tied to this building...</td>\n                </tr>\n              )}\n            </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n\nexport default ViewExpenses\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAGC,SAAS,KAAQ,OAAO,CACnD,MAAO,sCAAsC,CAC7C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC1B,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACpB,KAAM,CAACC,QAAQ,CAAGC,WAAW,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAE/C,CAAC;AACH,6BADG,CAEC,KAAM,CAAAU,MAAM,CAAG,CACX,CAACC,KAAK,CAAE,CAAC,CAAEC,KAAK,CAAE,SAAS,CAAC,CAC9B,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,UAAU,CAAC,CAC7B,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,OAAO,CAAC,CAC1B,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,OAAO,CAAC,CAC1B,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,KAAK,CAAC,CACxB,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,MAAM,CAAC,CACzB,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,MAAM,CAAC,CACzB,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,QAAQ,CAAC,CAC3B,CAACD,KAAK,CAAC,CAAC,CAAGC,KAAK,CAAE,WAAW,CAAC,CAC9B,CAACD,KAAK,CAAC,EAAE,CAAEC,KAAK,CAAE,SAAS,CAAC,CAC5B,CAACD,KAAK,CAAC,EAAE,CAAEC,KAAK,CAAE,UAAU,CAAC,CAC7B,CAACD,KAAK,CAAC,EAAE,CAAEC,KAAK,CAAE,UAAU,CAAC,CAC9B,CACHX,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,aAAa,CAAG,KAAAA,CAAA,GAAW,CAC/B,GAAI,CACF,KAAM,CAAAC,KAAK,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAClD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,KAAK,CAACiB,GAAG,CAAC,cAAc,CAAE,CAC/CC,OAAO,CAAE,CAACC,aAAa,CAAEP,KAAK,CAChC,CAAC,CAAC,CACF,GAAGI,QAAQ,CAACI,IAAI,CAACC,MAAM,CAAE,CACvB;AACA,KAAM,CAAAC,gBAAgB,CAAG,KAAM,CAAAtB,KAAK,CAACiB,GAAG,kBAAAM,MAAA,CACrBP,QAAQ,CAACI,IAAI,CAACC,MAAM,CACvC,CAAC,CACD,KAAM,CAAAG,gBAAgB,CAAGF,gBAAgB,CAACF,IAAI,CAC9Cb,WAAW,CAACiB,gBAAgB,EAAG,EAAE,CAAC,CAEpC,CAEF,CAAC,MAAMC,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC,CACpB,CACF,CAAC,CACDd,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAIN,KAAM,CAAAiB,YAAY,CAAG,KAAO,CAAAC,SAAS,EAAK,CACxC,KAAM,CAAAC,aAAa,CAAGjB,MAAM,CAACkB,OAAO,CAAC,uCAAuC,CAAC,CAC7E,GAAI,CAACD,aAAa,CAAC,CACjB,OACF,CACA,GAAI,CACF,KAAM,CAAAlB,KAAK,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAClD,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAhB,KAAK,CAACgC,MAAM,uCAAAT,MAAA,CAAuCM,SAAS,EAAK,CACpFX,OAAO,CAAG,CAACC,aAAa,CAAGP,KAAK,CAEtC,CAAC,CAAC,CAEF,GAAII,QAAQ,CAACiB,MAAM,EAAI,GAAG,CAAE,CACxB;AACA,KAAM,CAAAC,eAAe,CAAG5B,QAAQ,CAAC6B,MAAM,CAACC,OAAO,EAAIA,OAAO,CAACC,GAAG,GAAKR,SAAU,CAAC,CAC9EtB,WAAW,CAAC2B,eAAe,CAAC,CAChC,CAAC,IAAI,CACHR,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAC,CAC3C,CACF,CAAC,MAAOA,KAAK,CAAC,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAGA,KAAK,CAAC,CAClD,CACF,CAAC,CAEC,mBACEvB,IAAA,QAAAoC,QAAA,cACElC,KAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAD,QAAA,eACxBpC,IAAA,OAAIqC,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,0BAAwB,CAAI,CAAC,cACzDlC,KAAA,UAAOmC,SAAS,CAAC,OAAO,CAAAD,QAAA,eACpBpC,IAAA,UAAAoC,QAAA,cACIlC,KAAA,OAAAkC,QAAA,eACIpC,IAAA,OAAAoC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBpC,IAAA,OAAAoC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdpC,IAAA,OAAAoC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBpC,IAAA,OAAAoC,QAAA,CAAI,OAAK,CAAI,CAAC,cACdpC,IAAA,OAAAoC,QAAA,CAAI,MAAI,CAAI,CAAC,cACbpC,IAAA,OAAAoC,QAAA,CAAI,SAAO,CAAI,CAAC,EAChB,CAAC,CACF,CAAC,cACRpC,IAAA,UAAAoC,QAAA,CACGhC,QAAQ,CAACkC,MAAM,CAAG,CAAC,CAClBlC,QAAQ,CAACmC,GAAG,CAAEL,OAAO,OAAAM,YAAA,oBACnBtC,KAAA,OAAAkC,QAAA,eACEpC,IAAA,OAAAoC,QAAA,CAAKF,OAAO,CAACO,aAAa,CAAK,CAAC,cAChCzC,IAAA,OAAAoC,QAAA,CAAKF,OAAO,CAACQ,KAAK,CAAK,CAAC,cACxB1C,IAAA,OAAAoC,QAAA,CAAK,GAAI,CAAAO,IAAI,CAACT,OAAO,CAACU,YAAY,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAK,CAAC,cAE9D7C,IAAA,OAAAoC,QAAA,EAAAI,YAAA,CAAKlC,MAAM,CAACwC,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACxC,KAAK,GAAK2B,OAAO,CAACa,KAAK,CAAC,UAAAP,YAAA,iBAAnDA,YAAA,CAAqDhC,KAAK,CAAK,CAAC,cACrER,IAAA,OAAAoC,QAAA,CAAKF,OAAO,CAACc,IAAI,CAAK,CAAC,cACvBhD,IAAA,OAAIiD,MAAM,MAACC,OAAO,CAAEA,CAAA,GAAMxB,YAAY,CAACQ,OAAO,CAACC,GAAG,CAAE,CAACE,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,QAAM,CAAI,CAAC,GAPpFF,OAAO,CAACC,GAQb,CAAC,EACN,CAAC,cAEFnC,IAAA,OAAAoC,QAAA,cACApC,IAAA,OAAImD,OAAO,CAAC,GAAG,CAACd,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,uCAAqC,CAAI,CAAC,CAC9E,CACL,CACI,CAAC,EACL,CAAC,EACL,CAAC,CACH,CAAC,CAEV,CAEA,cAAe,CAAAjC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}