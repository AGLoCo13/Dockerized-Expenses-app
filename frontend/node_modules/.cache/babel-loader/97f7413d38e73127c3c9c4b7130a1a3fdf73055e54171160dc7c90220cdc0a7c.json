{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import ConsumptionHistory from'./ConsumptionHistory';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FuelCharge(){const[formData,setFormData]=useState({apartment:'',month:'',year:'',consumption:''});const[apartments,setApartments]=useState([]);const[building,setBuilding]=useState(null);const[refreshHistory,setRefreshHistory]=useState(false);const months=[{value:1,label:'January'},{value:2,label:'February'},{value:3,label:'March'},{value:4,label:'April'},{value:5,label:'May'},{value:6,label:'June'},{value:7,label:'July'},{value:8,label:'August'},{value:9,label:'September'},{value:10,label:'October'},{value:11,label:'November'},{value:12,label:'December'}];//Generate a list of years startong from the current year up to some number of years in the future\nconst currentYear=new Date().getFullYear();const futureYears=10;const years=Array.from({length:futureYears},(_,i)=>currentYear+i);//Get the building and apartments the building Administrator is tied to.\nuseEffect(()=>{const fetchBuildingAndApartments=async()=>{try{const token=window.localStorage.getItem('token');const response=await axios.get('/api/profile',{headers:{Authorization:token}});if(response.data.profileId){//If true give me the building he's admin to \nconst buildingResponse=await axios.get(\"/api/buildings/\".concat(response.data.profileId));const fetchedBuilding=buildingResponse.data;setBuilding(fetchedBuilding);//Fetch apartments tied to the building \nconst apartmentsResponse=await axios.get(\"/aps/Apartments/\".concat(fetchedBuilding._id));//Extract the \"apartments\" field\nsetApartments(apartmentsResponse.data);}}catch(error){console.error(error);}};fetchBuildingAndApartments();},[]);const handleInputChange=event=>{const{name,value}=event.target;setFormData({...formData,[name]:value});};const handleSubmit=async event=>{event.preventDefault();try{await axios.post('/api/consumption',formData);toast.success('Fuel Charge for apartment passed successfully!');//Force a refresh on the ConsumptionHistory component\nsetRefreshHistory(prev=>!prev);}catch(error){toast.error('Error passing fuel charge');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\" Gas Consumption for Apartment \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"apartment\",children:\"Apartment: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"apartment\",name:\"apartment\",className:\"form-control\",value:formData.apartment,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select an apartment\"}),apartments.map(apartment=>/*#__PURE__*/_jsxs(\"option\",{value:apartment._id,children:[apartment.name,\" - Floor \",apartment.floor]},apartment._id))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"month\",children:\" Month: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"month\",name:\"month\",className:\"form-control\",value:formData.month,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a month\"}),months.map(month=>/*#__PURE__*/_jsx(\"option\",{value:month.value,children:month.label},month.value))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"year\",children:\" Year: \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"year\",name:\"year\",className:\"form-control\",value:formData.year,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a year\"}),years.map(year=>/*#__PURE__*/_jsx(\"option\",{value:year,children:year},year))]}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"consumption\",children:\"Gas Consumption (hours)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"consumption\",name:\"consumption\",className:\"form-control\",value:formData.consumption,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Save Consumption\"})]}),formData.apartment&&/*#__PURE__*/_jsx(ConsumptionHistory,{apartmentId:formData.apartment,refresh:refreshHistory})]});}export default FuelCharge;","map":{"version":3,"names":["React","useEffect","useState","axios","ToastContainer","toast","ConsumptionHistory","jsx","_jsx","jsxs","_jsxs","FuelCharge","formData","setFormData","apartment","month","year","consumption","apartments","setApartments","building","setBuilding","refreshHistory","setRefreshHistory","months","value","label","currentYear","Date","getFullYear","futureYears","years","Array","from","length","_","i","fetchBuildingAndApartments","token","window","localStorage","getItem","response","get","headers","Authorization","data","profileId","buildingResponse","concat","fetchedBuilding","apartmentsResponse","_id","error","console","handleInputChange","event","name","target","handleSubmit","preventDefault","post","success","prev","className","children","onSubmit","htmlFor","id","onChange","map","floor","type","apartmentId","refresh"],"sources":["/home/tonyg/Node-React.js-Expenses-Application/frontend/src/components/FuelCharge.js"],"sourcesContent":["import React , { useEffect, useState } from 'react'\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {ToastContainer , toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ConsumptionHistory from './ConsumptionHistory';\n\nfunction FuelCharge() {\n    const [formData , setFormData] = useState({\n      apartment: '',\n      month: '',\n      year: '',\n      consumption: '',\n    });\n    const [apartments , setApartments] = useState([]);\n    const [building , setBuilding ] = useState(null);\n    const [refreshHistory , setRefreshHistory] = useState(false);\n\n    const months = [\n      {value: 1, label: 'January'},\n      {value:2 , label: 'February'},\n      {value:3 , label: 'March'},\n      {value:4 , label: 'April'},\n      {value:5 , label: 'May'},\n      {value:6 , label: 'June'},\n      {value:7 , label: 'July'},\n      {value:8 , label: 'August'},\n      {value:9 , label: 'September'},\n      {value:10, label: 'October'},\n      {value:11, label: 'November'},\n      {value:12, label: 'December'}\n    ];\n\n    //Generate a list of years startong from the current year up to some number of years in the future\n    const currentYear = new Date().getFullYear();\n    const futureYears = 10;\n    const years = Array.from({length: futureYears}, (_, i) => currentYear + i);\n    //Get the building and apartments the building Administrator is tied to.\n    useEffect(() => {\n      const fetchBuildingAndApartments = async () => {\n        try {\n          const token = window.localStorage.getItem('token');\n          const response = await axios.get('/api/profile', {\n            headers: { Authorization : token} , \n          });\n\n          if (response.data.profileId) {\n            //If true give me the building he's admin to \n            const buildingResponse = await axios.get(\n              `/api/buildings/${response.data.profileId}`\n            );\n            const fetchedBuilding = buildingResponse.data;\n            setBuilding(fetchedBuilding);\n\n            //Fetch apartments tied to the building \n            const apartmentsResponse = await axios.get(`/aps/Apartments/${fetchedBuilding._id}`);\n            //Extract the \"apartments\" field\n            setApartments(apartmentsResponse.data);\n          }\n        } catch(error) {\n          console.error(error);\n        }\n      };\n      fetchBuildingAndApartments();\n    }, []);\n\n    const handleInputChange = (event) => {\n      const {name , value } = event.target;\n      setFormData({\n        ...formData,\n        [name]: value,\n      });\n    };\n\n    const handleSubmit = async (event) => {\n      event.preventDefault();\n      try{\n        await axios.post('/api/consumption', formData);\n        toast.success('Fuel Charge for apartment passed successfully!');\n\n        //Force a refresh on the ConsumptionHistory component\n        setRefreshHistory(prev => !prev);\n      }catch(error) {\n        toast.error('Error passing fuel charge')\n      }\n      \n    };\n  return (\n    <div className='container'>\n      <h2 className='text-center'> Gas Consumption for Apartment </h2>\n      <form onSubmit= {handleSubmit}>\n          <label htmlFor = \"apartment\">Apartment: </label>\n          <select \n            id='apartment'\n            name='apartment'\n            className='form-control'\n            value={formData.apartment}\n            onChange={handleInputChange}\n\n        >\n          <option value=\"\">Select an apartment</option>\n          {apartments.map((apartment) => (\n            <option key={apartment._id} value={apartment._id}>\n               {apartment.name} - Floor {apartment.floor}\n            </option>\n          ))}\n        </select>\n        <label htmlFor = \"month\" > Month: </label>\n        <select\n          id=\"month\"\n          name=\"month\"\n          className='form-control'\n          value={formData.month}\n          onChange={handleInputChange}\n          >\n            <option value=\"\">Select a month</option>\n            {months.map((month) => (\n              <option key = {month.value} value={month.value}>\n                {month.label}\n              </option>\n            ))}\n          </select>\n\n          <label htmlFor= \"year\"> Year: </label>\n          <select \n            id=\"year\"\n            name=\"year\"\n            className='form-control'\n            value={formData.year}\n            onChange={handleInputChange}\n            >\n              <option value=\"\">Select a year</option>\n              {years.map((year)=> (\n                <option key={year} value={year}>\n                  {year}\n                </option>\n              ))}\n            </select>\n\n            <label htmlFor=\"consumption\">Gas Consumption (hours)</label>\n            <input  \n              type=\"number\"\n              id=\"consumption\"\n              name=\"consumption\"\n              className='form-control'\n              value={formData.consumption}\n              onChange={handleInputChange}\n              />\n\n              <button type=\"submit\" className=\"btn btn-primary\">Save Consumption</button>\n      </form>\n      {formData.apartment && (\n        <ConsumptionHistory apartmentId={formData.apartment} refresh={refreshHistory}/>\n      )}\n    </div>\n  )\n}\n\nexport default FuelCharge;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}