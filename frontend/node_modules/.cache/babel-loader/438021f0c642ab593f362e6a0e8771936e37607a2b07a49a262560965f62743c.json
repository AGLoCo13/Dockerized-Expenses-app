{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import'../css/ViewAdminProfile.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ViewAdminProfile(){const[userData,setUserData]=useState(null);const[editMode,setEditMode]=useState(false);const[editedData,setEditedData]=useState({});useEffect(()=>{fetchUserData();},[]);const fetchUserData=async()=>{try{// Get the token from local storage\nconst token=window.localStorage.getItem('token');// Fetch the user's profile data from the server with the token in the headers\n// Fetch the user's profile data from the server\nconst response=await axios.get('/api/profile',{headers:{Authorization:\"\".concat(token)}});setUserData(response.data);console.log(response);setEditedData(response.data);}catch(error){console.error('Error fetching user data:',error);}};const handleEditClick=()=>{setEditMode(true);};const handleCancelEdit=()=>{setEditMode(false);setEditedData(userData);};const handleInputChange=e=>{const{name,value}=e.target;setEditedData(prevData=>({...prevData,[name]:value}));};const handleSaveChanges=async()=>{console.log(\"Attempting to save changes...\");try{// Send a PUT request to update the user's profile data on the Server\nconst token=window.localStorage.getItem('token');// Assuming you store the token in local storage\n// Send a PUT request to update the user's profile data on the Server\nconst response=await axios.put('/api/admin/profile',editedData,{headers:{Authorization:\"\".concat(token)}});console.log(\"server Response:\",response);}catch(error){console.error('Error updating user data:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container my-4\",children:userData?/*#__PURE__*/_jsx(_Fragment,{children:!editMode?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name: \"}),userData.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email: \"}),userData.email,\" \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address: \"}),\" \",userData.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Cellphone: \"}),\" \",userData.cellphone,\" \"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleEditClick,children:\"Edit\"})]})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit User Profile\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",name:\"name\",className:\"form-control\",value:editedData.name||'',onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",className:\"form-control\",value:editedData.email||'',onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"address\",className:\"form-label\",children:\" Address: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"address\",name:\"address\",className:\"form-control\",value:editedData.address||'',onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cellphone\",className:\"form-label\",children:\"Cellphone: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"cellphone\",name:\"cellphone\",className:\"form-control\",value:editedData.cellphone||'',onChange:handleInputChange})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary me-2\",onClick:handleSaveChanges,children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleCancelEdit,children:\"Cancel\"})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading user data...\"})});}export default ViewAdminProfile;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewAdminProfile","userData","setUserData","editMode","setEditMode","editedData","setEditedData","fetchUserData","token","window","localStorage","getItem","response","get","headers","Authorization","concat","data","console","log","error","handleEditClick","handleCancelEdit","handleInputChange","e","name","value","target","prevData","handleSaveChanges","put","className","children","email","address","cellphone","onClick","htmlFor","type","id","onChange"],"sources":["/home/tonyg/Node-React.js-Expenses-Application/frontend/src/components/ViewAdminProfile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../css/ViewAdminProfile.css';\n\nfunction ViewAdminProfile() {\n  const [userData, setUserData] = useState(null);\n  const [editMode, setEditMode] = useState(false);\n  const [editedData, setEditedData] = useState({});\n\n  useEffect(() => {\n    fetchUserData();\n  }, []);\n\n  const fetchUserData = async () => {\n    try {\n       // Get the token from local storage\n    const token = window.localStorage.getItem('token');\n\n    // Fetch the user's profile data from the server with the token in the headers\n      // Fetch the user's profile data from the server\n      const response = await axios.get('/api/profile', {\n        headers: {\n          Authorization: `${token}`,\n        },\n      });\n      setUserData(response.data);\n      console.log(response);\n      setEditedData(response.data);\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    }\n  };\n\n  const handleEditClick = () => {\n    setEditMode(true);\n  };\n\n  const handleCancelEdit = () => {\n    setEditMode(false);\n    setEditedData(userData);\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setEditedData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleSaveChanges = async () => {\n    console.log(\"Attempting to save changes...\")\n    try {\n      // Send a PUT request to update the user's profile data on the Server\n    const token = window.localStorage.getItem('token'); // Assuming you store the token in local storage\n      // Send a PUT request to update the user's profile data on the Server\n      const response = await axios.put('/api/admin/profile', editedData, {\n        headers: {\n          Authorization: `${token}`,\n        },\n      });\n      console.log(\"server Response:\" , response);\n    } catch (error) {\n      console.error('Error updating user data:', error);\n    }\n  };\n\n  return (\n    <div className='container my-4'>\n      {userData ? (\n        <>\n          {!editMode ? (\n            <>\n            <div className='profile-section'>\n              <h2>User Profile</h2>\n              <div className='profile-details'>\n              <p><strong>Name: </strong>{userData.name}</p>\n              <p><strong>Email: </strong>{userData.email} </p>\n              <p><strong>Address: </strong> {userData.address}</p>\n              <p><strong>Cellphone: </strong> {userData.cellphone} </p>\n              </div>\n              <button className=\"btn btn-primary\" onClick={handleEditClick}>Edit</button>\n              </div>\n            </>\n          ) : (\n            <>\n              <h2>Edit User Profile</h2>\n              <form>\n                <div className='mb-3'>\n                  <label htmlFor='name' className='form-label'>Name:</label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    className=\"form-control\"\n                    value={editedData.name || ''}\n                    onChange={handleInputChange}\n                  />\n                </div>\n                <div className = 'mb-3'>\n                  <label htmlFor='email' className='form-label'>Email:</label>\n                  <input\n                    type=\"email\"\n                    id=\"email\"\n                    name=\"email\"\n                    className='form-control'\n                    value={editedData.email || ''}\n                    onChange={handleInputChange}\n                  />\n                </div>\n                <div className='mb-3'>\n                  <label htmlFor=\"address\" className='form-label'> Address: </label>\n                  <input\n                    type=\"text\"\n                    id=\"address\"\n                    name=\"address\"\n                    className='form-control'\n                    value={editedData.address || ''}\n                    onChange={handleInputChange}\n                  />\n                </div>\n                <div className='mb-3'>\n                  <label htmlFor='cellphone' className='form-label'>Cellphone: </label>\n                  <input\n                    type=\"number\"\n                    id=\"cellphone\"\n                    name=\"cellphone\"\n                    className='form-control'\n                    value={editedData.cellphone || ''}\n                    onChange={handleInputChange}\n                  />\n                </div>\n              </form>\n              <button type=\"button\" className=\"btn btn-primary me-2\"onClick={handleSaveChanges}>Save Changes</button>\n              <button className=\"btn btn-secondary\" onClick={handleCancelEdit}>Cancel</button>\n            </>\n          )}\n        </>\n      ) : (\n        <p>Loading user data...</p>\n      )}\n    </div>\n  );\n}\n\nexport default ViewAdminProfile;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}