{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ViewBuilding(){const[building,setBuilding]=useState(null);const[apartments,setApartments]=useState([]);useEffect(()=>{const fetchBuildingAndApartments=async()=>{try{const token=window.localStorage.getItem('token');const response=await axios.get('http://localhost:5000/api/profile',{headers:{Authorization:token}});// Check if the user's profile has a profileId\nif(response.data.profileId){//if true give me the building that he's admin to\nconst buildingResponse=await axios.get(\"http://localhost:5000/api/buildings/\".concat(response.data.profileId));const fetchedBuilding=buildingResponse.data;setBuilding(fetchedBuilding);// Fetch apartments tied to the building\nconst apartmentsResponse=await axios.get(\"http://localhost:5000/aps/Apartments/\".concat(fetchedBuilding._id));// Extract the \"apartments\" field\nsetApartments(apartmentsResponse.data);}}catch(error){console.error(error);}};fetchBuildingAndApartments();},[]);//Log the length of the apartments array just before rendering \nconsole.log('Apartments Array Length:',apartments.length);return/*#__PURE__*/_jsx(\"div\",{className:\"container my-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:building?/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Your Building\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Building Address:\"}),\" \",building.address]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Floors:\"}),\" \",building.floors]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Apartments:\"}),\" \",building.apartments]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"Reserve:\"}),\" \",building.reserve]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-building\",children:\"No building Assigned...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:apartments.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Apartments in the Building\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:apartments.map(apartment=>/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",apartment.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Floor:\"}),\" \",apartment.floor]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Square Meters:\"}),\" \",apartment.square_meters]})]},apartment._id))})})]}):/*#__PURE__*/_jsx(\"p\",{className:\"no-apartments\",children:\"No apartments tied to this building...\"})})]})});}export default ViewBuilding;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","ViewBuilding","building","setBuilding","apartments","setApartments","fetchBuildingAndApartments","token","window","localStorage","getItem","response","get","headers","Authorization","data","profileId","buildingResponse","concat","fetchedBuilding","apartmentsResponse","_id","error","console","log","length","className","children","address","floors","reserve","map","apartment","name","floor","square_meters"],"sources":["/home/tonyg/Node-React.js-Expenses-Application/frontend/src/components/ViewBuilding.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nfunction ViewBuilding() {\n  const [building, setBuilding] = useState(null);\n  const [apartments, setApartments] = useState([]);\n\n  useEffect(() => {\n    const fetchBuildingAndApartments = async () => {\n      try {\n        const token = window.localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5000/api/profile', {\n          headers: { Authorization: token },\n        });\n\n        // Check if the user's profile has a profileId\n        if (response.data.profileId) {\n          //if true give me the building that he's admin to\n          const buildingResponse = await axios.get(\n            `http://localhost:5000/api/buildings/${response.data.profileId}`\n          );\n          const fetchedBuilding = buildingResponse.data;\n          setBuilding(fetchedBuilding);\n\n          // Fetch apartments tied to the building\n          const apartmentsResponse = await axios.get(\n            `http://localhost:5000/aps/Apartments/${fetchedBuilding._id}`\n          );\n          // Extract the \"apartments\" field\n          setApartments(apartmentsResponse.data);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchBuildingAndApartments();\n  }, []);\n\n  //Log the length of the apartments array just before rendering \n  console.log('Apartments Array Length:' , apartments.length);\n\n  return (\n    <div className=\"container my-4\">\n      <div className='row'>\n        <div className='col-lg-6'>\n          {building ? (\n          <div className=\"card mb-4\">\n          <div className='card-header'>\n          <h2>Your Building</h2>\n          </div>\n          <div className=\"card-body\">\n            <p className=\"card-text\">\n              <span className=\"detail-label\">Building Address:</span> {building.address}\n            </p>\n            <p className=\"card-text\">\n              <span className=\"detail-label\">Floors:</span> {building.floors}\n            </p>\n            <p className=\"card-text\">\n              <span className=\"detail-label\">Apartments:</span> {building.apartments}\n            </p>\n            <p className=\"card-text\">\n              <span className=\"detail-label\">Reserve:</span> {building.reserve}\n            </p>\n          </div>\n        </div>\n      ) : (\n        <p className=\"no-building\">No building Assigned...</p>\n      )}\n      </div>\n      <div className='col-lg-6'>\n      {apartments.length > 0 ? (\n        <div className=\"card\">\n          <div className='card-header'>\n          <h2>Apartments in the Building</h2>\n          </div>\n          <div className=\"card-body\">\n          <ul className=\"list-group list-group-flush\">\n            {apartments.map((apartment) => (\n              <li key={apartment._id} className=\"list-group-item\">\n                <p className='card-text'>\n                <strong>Name:</strong> {apartment.name} \n                </p>\n                <p className='card-text'>\n                  <strong>Floor:</strong> {apartment.floor}\n                </p>\n                <p className='card-text'>\n                  <strong>Square Meters:</strong> {apartment.square_meters}\n                </p>\n              </li>\n            ))}\n          </ul>\n        </div>\n        </div>\n      ) : (\n        <p className=\"no-apartments\">No apartments tied to this building...</p>\n      )}\n    </div>\n    </div>\n    </div>\n  );\n}\n\nexport default ViewBuilding;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}